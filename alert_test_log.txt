[2025-10-26 11:52:32] --- INICIO DE LA PRUEBA DE ALERTAS ---
[2025-10-26 11:52:32] Esperando 10 segundos a que la aplicación se inicie por completo...
[2025-10-26 11:52:42] Paso 1: Obteniendo token JWT...
[2025-10-26 11:52:42] Token JWT obtenido exitosamente.
[2025-10-26 11:52:42] Token: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0LXVzZXIiLCJzY29wZSI6IlVTRVIiLCJpc3MiOiJkZW1vLWlzc3VlciIsImV4cCI6MTc2MTQ5NzU2NywiaWF0IjoxNzYxNDkzOTY3LCJqdGkiOiI4MTExZGI3MS1jYTc4LTQ2NTMtYWIzNy1jZmY5ODk5MjAwMzkifQ.isrOTCrwsTgNA87kfxMlGjarNiQ5EcVNuoZ3OEnmMyw
[2025-10-26 11:52:42] 
Paso 2: Enviando transacción de pago sospechosa (monto: 15000)...
[2025-10-26 11:52:42] Transacción enviada. Código de respuesta: 200
[2025-10-26 11:52:42] Respuesta: published: payments.events key=0822631d-1b1e-4111-b7d1-5389a8c454e8
[2025-10-26 11:52:42] 
Pausa de 5 segundos para el procesamiento asíncrono...
[2025-10-26 11:52:47] 
Paso 3: Verificando si la alerta fue persistida en la base de datos...
[2025-10-26 11:52:48] Consulta a la base de datos de alertas exitosa. Código de respuesta: 200
[2025-10-26 11:52:48] Alertas en la BD: [{"id":1,"eventId":null,"alertType":"threshold_exceeded","sourceType":"unknown","amount":15000.0,"payload":"{\"id\": \"c777b3a3-c153-4be7-b1e1-1de34ff81600\", \"type\": \"unknown\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0, \"aggregate_id\": \"c777b3a3-c153-4be7-b1e1-1de34ff81600\"}","kafkaPartition":0,"kafkaOffset":0,"createdAt":"2025-10-26T15:52:20.850614Z"},{"id":2,"eventId":null,"alertType":"threshold_exceeded","sourceType":"unknown","amount":15000.0,"payload":"{\"id\": \"f59b491e-d40a-4df1-8f4b-28fc3609190b\", \"type\": \"unknown\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0, \"aggregate_id\": \"f59b491e-d40a-4df1-8f4b-28fc3609190b\"}","kafkaPartition":0,"kafkaOffset":2,"createdAt":"2025-10-26T15:52:48.994821Z"}]
[2025-10-26 11:52:48] 
Paso 4: Consumiendo la alerta desde el topic de Kafka 'alerts.suspect'...
[2025-10-26 11:52:52] Consumo del topic de Kafka exitoso. Código de respuesta: 200
[2025-10-26 11:52:52] Alerta consumida de Kafka: [{"partition":0,"offset":0,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"unknown\",\"amount\":15000.0,\"id\":\"c777b3a3-c153-4be7-b1e1-1de34ff81600\",\"aggregate_id\":\"c777b3a3-c153-4be7-b1e1-1de34ff81600\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":1}}","timestamp":1761493780939},{"partition":0,"offset":2,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"unknown\",\"amount\":15000.0,\"id\":\"f59b491e-d40a-4df1-8f4b-28fc3609190b\",\"aggregate_id\":\"f59b491e-d40a-4df1-8f4b-28fc3609190b\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":2}}","timestamp":1761493968961}]
[2025-10-26 11:52:52] 
--- FIN DE LA PRUEBA DE ALERTAS ---
[2025-10-26 11:52:52] Revisa el archivo 'alert_test_log.txt' para ver el detalle completo.
