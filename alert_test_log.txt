[2025-10-27 12:56:55] --- INICIO DE LA PRUEBA DE ALERTAS ---
[2025-10-27 12:56:55] Esperando 10 segundos a que la aplicación se inicie por completo...
[2025-10-27 12:57:05] Paso 1: Obteniendo token JWT...
[2025-10-27 12:57:05] Token JWT obtenido exitosamente.
[2025-10-27 12:57:05] Token: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0LXVzZXIiLCJzY29wZSI6IlVTRVIiLCJpc3MiOiJkZW1vLWlzc3VlciIsImV4cCI6MTc2MTU4NzgyNSwiaWF0IjoxNzYxNTg0MjI1LCJqdGkiOiI0ODRhMDA0OS1jOWYwLTRhOTEtYjAyYi00ZWY5MWRmZWNlZDgifQ.a-CFqPvZY4191ZKnp-fw0VaM_h80P3nU6T4jjsdju6s
[2025-10-27 12:57:05] 
Paso 2: Enviando transacción de pago sospechosa (monto: 15000)...
[2025-10-27 12:57:06] Transacción enviada. Código de respuesta: 200
[2025-10-27 12:57:06] Respuesta: published: payments.events key=d8dd6e92-368c-4e90-96c8-f4bf688df930
[2025-10-27 12:57:06] 
Pausa de 5 segundos para el procesamiento asíncrono...
[2025-10-27 12:57:11] 
Paso 3: Verificando si la alerta fue persistida en la base de datos...
[2025-10-27 12:57:11] Consulta a la base de datos de alertas exitosa. Código de respuesta: 200
[2025-10-27 12:57:11] Alertas en la BD: [{"id":1,"eventId":null,"alertType":"threshold_exceeded","sourceType":"transfer","amount":115000.0,"payload":"{\"id\": \"t-45617996\", \"type\": \"transfer\", \"alert\": \"threshold_exceeded\", \"amount\": 115000.0, \"aggregate_id\": \"t-45617996\"}","kafkaPartition":0,"kafkaOffset":0,"createdAt":"2025-10-27T16:48:25.705821Z"},{"id":2,"eventId":null,"alertType":"threshold_exceeded","sourceType":"unknown","amount":15000.0,"payload":"{\"id\": \"b80a6fe8-3164-41e6-bb5a-fde5cff1e8e2\", \"type\": \"unknown\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0, \"aggregate_id\": \"b80a6fe8-3164-41e6-bb5a-fde5cff1e8e2\"}","kafkaPartition":0,"kafkaOffset":1,"createdAt":"2025-10-27T16:48:25.756493Z"},{"id":3,"eventId":null,"alertType":"threshold_exceeded","sourceType":"transfer","amount":12000.0,"payload":"{\"id\": \"t-001\", \"type\": \"transfer\", \"alert\": \"threshold_exceeded\", \"amount\": 12000.0, \"aggregate_id\": \"t-001\"}","kafkaPartition":0,"kafkaOffset":2,"createdAt":"2025-10-27T16:48:25.763529Z"},{"id":4,"eventId":null,"alertType":"threshold_exceeded","sourceType":"transfer","amount":115000.0,"payload":"{\"id\": \"t-45617996\", \"type\": \"transfer\", \"alert\": \"threshold_exceeded\", \"amount\": 115000.0, \"aggregate_id\": \"t-45617996\"}","kafkaPartition":0,"kafkaOffset":3,"createdAt":"2025-10-27T16:48:25.770088Z"},{"id":5,"eventId":null,"alertType":"threshold_exceeded","sourceType":"unknown","amount":15000.0,"payload":"{\"id\": \"b80a6fe8-3164-41e6-bb5a-fde5cff1e8e2\", \"type\": \"unknown\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0, \"aggregate_id\": \"b80a6fe8-3164-41e6-bb5a-fde5cff1e8e2\"}","kafkaPartition":0,"kafkaOffset":4,"createdAt":"2025-10-27T16:48:25.775908Z"},{"id":6,"eventId":null,"alertType":"threshold_exceeded","sourceType":"transfer","amount":12000.0,"payload":"{\"id\": \"t-001\", \"type\": \"transfer\", \"alert\": \"threshold_exceeded\", \"amount\": 12000.0, \"aggregate_id\": \"t-001\"}","kafkaPartition":0,"kafkaOffset":5,"createdAt":"2025-10-27T16:48:25.782894Z"},{"id":7,"eventId":null,"alertType":"threshold_exceeded","sourceType":"payment","amount":15000.0,"payload":"{\"id\": \"p-1761583708757\", \"type\": \"payment\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0, \"aggregate_id\": \"p-1761583708757\"}","kafkaPartition":0,"kafkaOffset":7,"createdAt":"2025-10-27T16:48:29.327726Z"},{"id":8,"eventId":null,"alertType":"threshold_exceeded","sourceType":"unknown","amount":15000.0,"payload":"{\"id\": \"94c19f35-0776-44a1-81f4-537c2c6db055\", \"type\": \"unknown\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0, \"aggregate_id\": \"94c19f35-0776-44a1-81f4-537c2c6db055\"}","kafkaPartition":0,"kafkaOffset":9,"createdAt":"2025-10-27T16:50:15.145763Z"},{"id":9,"eventId":null,"alertType":"threshold_exceeded","sourceType":"unknown","amount":15000.0,"payload":"{\"id\": \"db1b07d5-e57a-498e-bfc3-b71e7999ca25\", \"type\": \"unknown\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0, \"aggregate_id\": \"db1b07d5-e57a-498e-bfc3-b71e7999ca25\"}","kafkaPartition":0,"kafkaOffset":11,"createdAt":"2025-10-27T16:52:26.032353Z"},{"id":10,"eventId":null,"alertType":"threshold_exceeded","sourceType":"transfer","amount":115000.0,"payload":"{\"id\": \"t-456179968\", \"type\": \"transfer\", \"alert\": \"threshold_exceeded\", \"amount\": 115000.0, \"aggregate_id\": \"t-456179968\"}","kafkaPartition":0,"kafkaOffset":13,"createdAt":"2025-10-27T16:55:12.807965Z"},{"id":11,"eventId":null,"alertType":"threshold_exceeded","sourceType":"payment","amount":15000.0,"payload":"{\"id\": \"0bf0ac94-571f-4c0b-83e3-91614b5f1314\", \"type\": \"payment\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0, \"aggregate_id\": \"0bf0ac94-571f-4c0b-83e3-91614b5f1314\"}","kafkaPartition":0,"kafkaOffset":15,"createdAt":"2025-10-27T16:57:06.165517Z"}]
[2025-10-27 12:57:11] 
Paso 4: Consumiendo la alerta desde el topic de Kafka 'alerts.suspect'...
[2025-10-27 12:57:15] Consumo del topic de Kafka exitoso. Código de respuesta: 200
[2025-10-27 12:57:15] Alerta consumida de Kafka: [{"partition":0,"offset":0,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"transfer\",\"amount\":115000.0,\"id\":\"t-45617996\",\"aggregate_id\":\"t-45617996\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":1}}","timestamp":1761581108450},{"partition":0,"offset":1,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"unknown\",\"amount\":15000.0,\"id\":\"b80a6fe8-3164-41e6-bb5a-fde5cff1e8e2\",\"aggregate_id\":\"b80a6fe8-3164-41e6-bb5a-fde5cff1e8e2\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":2}}","timestamp":1761581147909},{"partition":0,"offset":2,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"transfer\",\"amount\":12000.0,\"id\":\"t-001\",\"aggregate_id\":\"t-001\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":3}}","timestamp":1761583113287},{"partition":0,"offset":3,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"transfer\",\"amount\":115000.0,\"id\":\"t-45617996\",\"aggregate_id\":\"t-45617996\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":1}}","timestamp":1761583384875},{"partition":0,"offset":4,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"unknown\",\"amount\":15000.0,\"id\":\"b80a6fe8-3164-41e6-bb5a-fde5cff1e8e2\",\"aggregate_id\":\"b80a6fe8-3164-41e6-bb5a-fde5cff1e8e2\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":2}}","timestamp":1761583384876},{"partition":0,"offset":5,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"transfer\",\"amount\":12000.0,\"id\":\"t-001\",\"aggregate_id\":\"t-001\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":3}}","timestamp":1761583384876},{"partition":0,"offset":7,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"payment\",\"amount\":15000.0,\"id\":\"p-1761583708757\",\"aggregate_id\":\"p-1761583708757\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":4}}","timestamp":1761583709204},{"partition":0,"offset":9,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"unknown\",\"amount\":15000.0,\"id\":\"94c19f35-0776-44a1-81f4-537c2c6db055\",\"aggregate_id\":\"94c19f35-0776-44a1-81f4-537c2c6db055\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":5}}","timestamp":1761583815031},{"partition":0,"offset":11,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"unknown\",\"amount\":15000.0,\"id\":\"db1b07d5-e57a-498e-bfc3-b71e7999ca25\",\"aggregate_id\":\"db1b07d5-e57a-498e-bfc3-b71e7999ca25\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":6}}","timestamp":1761583945921},{"partition":0,"offset":13,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"transfer\",\"amount\":115000.0,\"id\":\"t-456179968\",\"aggregate_id\":\"t-456179968\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":7}}","timestamp":1761584112792},{"partition":0,"offset":15,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"payment\",\"amount\":15000.0,\"id\":\"0bf0ac94-571f-4c0b-83e3-91614b5f1314\",\"aggregate_id\":\"0bf0ac94-571f-4c0b-83e3-91614b5f1314\"}","key":"{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int64\",\"optional\":false,\"default\":0,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbz-outbox.pos.outbox.Key\"},\"payload\":{\"id\":8}}","timestamp":1761584226151}]
[2025-10-27 12:57:15] 
--- FIN DE LA PRUEBA DE ALERTAS ---
[2025-10-27 12:57:15] Revisa el archivo 'alert_test_log.txt' para ver el detalle completo.
