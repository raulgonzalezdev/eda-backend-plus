[2025-11-11 05:57:57] --- INICIO DE LA PRUEBA DE ALERTAS ---
[2025-11-11 05:57:57] Esperando 10 segundos a que la aplicación se inicie por completo...
[2025-11-11 05:58:07] Paso 1: Obteniendo token JWT...
[2025-11-11 05:58:07] Token JWT obtenido exitosamente.
[2025-11-11 05:58:07] Token: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZXN0LXVzZXIiLCJzY29wZSI6IlVTRVIiLCJpc3MiOiJkZW1vLWlzc3VlciIsImV4cCI6MTc2Mjg1ODY4NywiaWF0IjoxNzYyODU1MDg3LCJqdGkiOiI0MjNiMjE0NC1lNzczLTRiMmMtYTM3Yy1lOTk4ZjM3NDcyZmMifQ.MuPAkWG1IH9nIgFQvzs75rNJe2FGu-F_BAYe8hFcCK8
[2025-11-11 05:58:07] 
Paso 2: Enviando transacción de pago sospechosa (monto: 15000)...
[2025-11-11 05:58:07] Transacción enviada. Código de respuesta: 200
[2025-11-11 05:58:07] Respuesta: published: payments.events key=5280993e-5140-472d-8602-7d83fea9b384
[2025-11-11 05:58:07] 
Pausa de 5 segundos para el procesamiento asíncrono...
[2025-11-11 05:58:12] 
Paso 3: Verificando si la alerta fue persistida en la base de datos...
[2025-11-11 05:58:12] Consulta a la base de datos de alertas exitosa. Código de respuesta: 200
[2025-11-11 05:58:12] Alertas en la BD: [{"id":1,"eventId":null,"alertType":"threshold_exceeded","sourceType":"payment","amount":15000.0,"payload":"{\"type\": \"payment\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0}","kafkaPartition":0,"kafkaOffset":0,"createdAt":"2025-11-10T20:44:04.579319Z"},{"id":2,"eventId":null,"alertType":"threshold_exceeded","sourceType":"transfer","amount":115000.0,"payload":"{\"type\": \"transfer\", \"alert\": \"threshold_exceeded\", \"amount\": 115000.0}","kafkaPartition":0,"kafkaOffset":1,"createdAt":"2025-11-10T20:44:04.622561Z"},{"id":3,"eventId":null,"alertType":"threshold_exceeded","sourceType":"transfer","amount":115000.0,"payload":"{\"type\": \"transfer\", \"alert\": \"threshold_exceeded\", \"amount\": 115000.0}","kafkaPartition":0,"kafkaOffset":2,"createdAt":"2025-11-10T20:44:04.631575Z"},{"id":4,"eventId":null,"alertType":"threshold_exceeded","sourceType":"transfer","amount":115000.0,"payload":"{\"type\": \"transfer\", \"alert\": \"threshold_exceeded\", \"amount\": 115000.0}","kafkaPartition":0,"kafkaOffset":3,"createdAt":"2025-11-10T20:44:04.639212Z"},{"id":5,"eventId":null,"alertType":"threshold_exceeded","sourceType":"payment","amount":15000.0,"payload":"{\"type\": \"payment\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0}","kafkaPartition":0,"kafkaOffset":4,"createdAt":"2025-11-10T20:44:04.646138Z"},{"id":6,"eventId":null,"alertType":"threshold_exceeded","sourceType":"payment","amount":15000.0,"payload":"{\"type\": \"payment\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0}","kafkaPartition":0,"kafkaOffset":5,"createdAt":"2025-11-10T20:44:04.655001Z"},{"id":7,"eventId":null,"alertType":"threshold_exceeded","sourceType":"payment","amount":15000.0,"payload":"{\"type\": \"payment\", \"alert\": \"threshold_exceeded\", \"amount\": 15000.0}","kafkaPartition":0,"kafkaOffset":6,"createdAt":"2025-11-10T23:52:50.528834Z"}]
[2025-11-11 05:58:12] 
Paso 4: Consumiendo la alerta desde el topic de Kafka 'alerts.suspect'...
[2025-11-11 05:58:15] Consumo del topic de Kafka exitoso. Código de respuesta: 200
[2025-11-11 05:58:15] Alerta consumida de Kafka: [{"partition":0,"offset":0,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"payment\",\"amount\":15000.0}","key":"120cf010-5d65-4132-807a-1e31ce06f0a2","timestamp":1762804636921},{"partition":0,"offset":1,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"transfer\",\"amount\":115000.0}","key":"t-456179968","timestamp":1762805407859},{"partition":0,"offset":2,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"transfer\",\"amount\":115000.0}","key":"t-456179968","timestamp":1762805427742},{"partition":0,"offset":3,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"transfer\",\"amount\":115000.0}","key":"t-456179968","timestamp":1762806186288},{"partition":0,"offset":4,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"payment\",\"amount\":15000.0}","key":"d8eeb696-0ffa-4c33-b390-1a44bdf2b3ac","timestamp":1762806286280},{"partition":0,"offset":5,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"payment\",\"amount\":15000.0}","key":"05f9a8db-a7f9-42f2-a0a7-f8aaf3c052a7","timestamp":1762806466315},{"partition":0,"offset":6,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"payment\",\"amount\":15000.0}","key":"dd386286-ffcf-48dc-b9a3-9a823b1651c7","timestamp":1762818770392},{"partition":0,"offset":7,"value":"{\"alert\":\"threshold_exceeded\",\"type\":\"payment\",\"amount\":15000.0}","key":"ec807a64-443a-4701-96c3-993df8002c82","timestamp":1762855094923}]
[2025-11-11 05:58:15] 
--- FIN DE LA PRUEBA DE ALERTAS ---
[2025-11-11 05:58:15] Revisa el archivo 'alert_test_log.txt' para ver el detalle completo.
